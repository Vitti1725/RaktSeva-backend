# RaktSeva Backend API

> **RaktSeva** is a high-performance, secure Django REST Framework (DRF) service that bridges the gap between hospitals in urgent need of specific blood types and verified local donorsâ€”because every drop saves lives.

---

## About

In critical medical emergencies, the delay in locating suitable blood donors can cost lives. **RaktSeva** addresses this challenge by:

1. **Verifying** donors through one-time passwords (OTP).
2. **Locating** verified donors within a configurable radius using Google Maps.
3. **Notifying** only relevant donorsâ€”ensuring privacy and reliability.

Built for scalability on AWS EC2 with NGINX, RaktSeva is production-ready and exemplifies best practices in RESTful API design, security, containerization, and test automation.

---

## Demo

- **Interactive API Docs (Swagger):**  
  [http://ec2-54-161-205-21.compute-1.amazonaws.com/swagger/](http://ec2-54-161-205-21.compute-1.amazonaws.com/swagger/)

- **Insomnia Collection:**  
  [Download `Insomnia_RaktSeva_Collection.yaml`](./Insomnia_RaktSeva_Collection.yaml)

---

## Features

- **OTP-backed donor verification** (via SMS simulation)
- **JWT authentication** with access & refresh tokens
- **Geo-search**: query donors within X km of any latitude/longitude
- **Interactive docs** automatically generated by Swagger
- **Dockerized** microservices for local development & production parity
- **Production orchestration** with NGINX on AWS EC2
- **Automated tests** with `pytest` 
- **CI pipeline** via GitHub Actions

---

## Tech Stack

| Layer              | Technology                            |
| ------------------ | ------------------------------------- |
| Language           | Python 3.10+                          |
| Framework          | Django + Django REST Framework (DRF)  |
| Database           | PostgreSQL (in Docker)                |
| Auth & Security    | JWT (SimpleJWT) + custom OTP logic    |
| Geo Services       | Google Maps Geocoding & Places API    |
| Documentation      | Swagger / drf-spectacular             |
| Containerization   | Docker & Docker Compose               |
| Reverse Proxy      | NGINX on AWS EC2                      |
| Testing            | pytest, pytest-django, factory_boy    |
| CI/CD              | GitHub Actions                        |
| Async (future)     | Celery + RabbitMQ                     |
| Real-time (future) | WebSockets                            |

---

## Getting Started

1. **Clone the repository**  
   ```bash
   git clone https://github.com/Vitti1725/RaktSeva-backend.git
   cd RaktSeva-backend
   ```

2. **Configure environment variables**  
   ```bash
   cp .env.example .env
   ```

3. **Build & start services**  
   ```bash
   docker-compose up --build -d
   ```

4. **Apply migrations & create superuser**  
   ```bash
   docker-compose exec web python manage.py migrate
   docker-compose exec web python manage.py createsuperuser
   ```

5. **Explore the application**  
   - Swagger UI (API docs): [http://localhost:8000/swagger/](http://localhost:8000/swagger/)  
   - Django Admin: [http://localhost:8000/admin/](http://localhost:8000/admin/)

---

## Usage

Use any HTTP client (curl, Insomnia, Postman) or integrate into your frontend/mobile app.

**Example: Send OTP**  
```bash
curl -X POST http://localhost:8000/api/auth/send-otp/   -H "Content-Type: application/json"   -d '{"phone":"+911234567890"}'
```

---

### EC2 Deployment Using `docker-compose-deploy.yml`

1. **Connect to your EC2 instance:**
```bash
ssh -i your-key.pem ec2-user@your-ec2-public-ip
```

2. **Clone the repository:**
```bash
git clone https://github.com/Vitti1725/RaktSeva-backend.git
cd RaktSeva-backend
```

3. **Pull the image (if using Docker Hub):**
```bash
docker pull your-dockerhub-username/raktseva-backend:latest
```

4. **Run with production Compose file:**
```bash
docker-compose -f docker-compose-deploy.yml up -d
```

---

### ðŸš€ GitHub Actions CI/CD

-  CI runs on PRs and pushes to main
-  Run tests, and build Docker image automatically

---

## Future Enhancements

- **Asynchronous Tasks**: Integrate Celery with RabbitMQ for handling background tasks like bulk notifications.
- **Real-time Communication**: Implement WebSockets to provide real-time updates to clients.
- **Enhanced Monitoring**: Add tools like Prometheus and Grafana for better observability.

---

